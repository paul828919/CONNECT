{
  "dashboard": {
    "id": null,
    "uid": "postgres-monitoring",
    "title": "PostgreSQL - Connect Database",
    "tags": ["postgres", "database", "connect"],
    "timezone": "browser",
    "schemaVersion": 16,
    "version": 0,
    "refresh": "30s",
    "panels": [
      {
        "id": 1,
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
        "type": "graph",
        "title": "Database Connections",
        "targets": [
          {
            "refId": "A",
            "datasource": {"type": "postgres", "uid": "bf11ilxtf5ybkf"},
            "rawSql": "SELECT NOW() as time, COUNT(*) as active_connections FROM pg_stat_activity WHERE state = 'active';",
            "format": "time_series"
          }
        ]
      },
      {
        "id": 2,
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
        "type": "stat",
        "title": "Total Connections",
        "targets": [
          {
            "refId": "A",
            "datasource": {"type": "postgres", "uid": "bf11ilxtf5ybkf"},
            "rawSql": "SELECT COUNT(*) as value FROM pg_stat_activity;",
            "format": "table"
          }
        ]
      },
      {
        "id": 3,
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
        "type": "table",
        "title": "Database Size",
        "targets": [
          {
            "refId": "A",
            "datasource": {"type": "postgres", "uid": "bf11ilxtf5ybkf"},
            "rawSql": "SELECT pg_size_pretty(pg_database_size('connect')) as size;",
            "format": "table"
          }
        ]
      },
      {
        "id": 4,
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
        "type": "table",
        "title": "Top Tables by Size",
        "targets": [
          {
            "refId": "A",
            "datasource": {"type": "postgres", "uid": "bf11ilxtf5ybkf"},
            "rawSql": "SELECT schemaname, tablename, pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size FROM pg_tables WHERE schemaname = 'public' ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC LIMIT 10;",
            "format": "table"
          }
        ]
      },
      {
        "id": 5,
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 16},
        "type": "table",
        "title": "Active Queries",
        "targets": [
          {
            "refId": "A",
            "datasource": {"type": "postgres", "uid": "bf11ilxtf5ybkf"},
            "rawSql": "SELECT pid, usename, application_name, client_addr, state, query_start, query FROM pg_stat_activity WHERE state != 'idle' ORDER BY query_start DESC LIMIT 20;",
            "format": "table"
          }
        ]
      }
    ]
  },
  "overwrite": true,
  "folderId": 0
}

