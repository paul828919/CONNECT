# ============================================
# Connect Platform - Production Environment
# ============================================
# Copy this file to .env.production and fill in actual values

# Node Environment
NODE_ENV=production

# ============================================
# Database Configuration
# ============================================
DB_PASSWORD=your_secure_postgresql_password_here
DATABASE_URL=postgresql://connect:${DB_PASSWORD}@pgbouncer:6432/connect?schema=public&pool_timeout=30&connection_limit=50

# ============================================
# Redis Configuration
# ============================================
REDIS_CACHE_URL=redis://redis-cache:6379/0
REDIS_QUEUE_URL=redis://redis-queue:6380/0

# ============================================
# Authentication & Security
# ============================================
# Generate with: openssl rand -base64 32
JWT_SECRET=your_jwt_secret_64_chars_minimum_here
NEXTAUTH_SECRET=your_nextauth_secret_32_chars_minimum_here
NEXTAUTH_URL=https://your-domain.com

# ============================================
# Data Encryption (PIPA Compliance - REQUIRED)
# ============================================
# AES-256-GCM encryption for 사업자등록번호 (business registration numbers)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Must be 64 hex characters (32 bytes). Never commit actual key to git.
# MUST rotate every 90 days for PIPA compliance (see lib/encryption.ts rotateKey())
ENCRYPTION_KEY=your_encryption_key_64_hex_chars_here_NEVER_COMMIT_THIS

# Encryption key rotation tracking (store securely, not in git)
# When rotating: decrypt with old key, re-encrypt with new key, update this date
ENCRYPTION_KEY_CREATED=2025-01-15
ENCRYPTION_KEY_NEXT_ROTATION=2025-04-15

# ============================================
# OAuth Providers (Korean Services)
# ============================================
# Kakao OAuth (https://developers.kakao.com/)
KAKAO_CLIENT_ID=your_kakao_client_id_here
KAKAO_CLIENT_SECRET=your_kakao_client_secret_here

# Naver OAuth (https://developers.naver.com/)
NAVER_CLIENT_ID=your_naver_client_id_here
NAVER_CLIENT_SECRET=your_naver_client_secret_here

# ============================================
# Payment Integration (Toss Payments)
# ============================================
# Get from: https://www.tosspayments.com/
TOSS_CLIENT_KEY=your_toss_client_key_here
TOSS_SECRET_KEY=your_toss_secret_key_here

# ============================================
# Monitoring & Error Tracking
# ============================================
# Sentry DSN (optional, for error tracking)
SENTRY_DSN=your_sentry_dsn_here

# Grafana Admin Password
GRAFANA_PASSWORD=your_secure_grafana_password_here

# ============================================
# Scraping Configuration
# ============================================
SCRAPER_CONCURRENCY=2
SCRAPER_TIMEOUT=30000
SCRAPER_USER_AGENT=Mozilla/5.0 (compatible; ConnectBot/1.0; +https://your-domain.com)

# 2Captcha Integration (for CAPTCHA solving if agencies implement bot detection)
# Get API key from: https://2captcha.com/enterpage
# Cost: ~$1-5/month for expected usage (pay-as-you-go, no subscription)
# Leave empty to disable CAPTCHA solving (scraper will fail on CAPTCHAs)
TWOCAPTCHA_API_KEY=your_2captcha_api_key_here_or_leave_empty

# Agency URLs (usually don't need to change)
IITP_URL=https://www.iitp.kr
KEIT_URL=https://www.keit.re.kr
TIPA_URL=https://www.tipa.or.kr
KIMST_URL=https://www.kimst.re.kr

# Rate Limiting (respectful scraping - follow robots.txt)
RATE_LIMIT_PER_MINUTE=10

# Scraping Schedule (cron expressions)
# Normal mode: 2x daily at 9:00 AM and 3:00 PM KST
SCRAPING_SCHEDULE_NORMAL=0 9,15 * * *
# Peak season mode: 4x daily (January-March)
SCRAPING_SCHEDULE_PEAK=0 9,12,15,18 1-3 * *

# ============================================
# Application Settings
# ============================================
# Public URL
NEXT_PUBLIC_APP_URL=https://your-domain.com

# ============================================
# Email Configuration (for notifications)
# ============================================
# Used for: New match notifications, deadline reminders, weekly digest
#
# Provider Options:
# 1. Gmail (Free for MVP: 500 emails/day)
#    - SMTP_HOST=smtp.gmail.com
#    - SMTP_PORT=587 (TLS) or 465 (SSL)
#    - SMTP_SECURE=false (for 587) or true (for 465)
#    - SMTP_USER=your-email@gmail.com
#    - SMTP_PASSWORD=app-specific-password (not your Gmail password!)
#    - Generate app password: https://myaccount.google.com/apppasswords
#
# 2. SendGrid (Production-ready: 100 free/day, then $19.95/month)
#    - SMTP_HOST=smtp.sendgrid.net
#    - SMTP_PORT=587
#    - SMTP_SECURE=false
#    - SMTP_USER=apikey (literal string "apikey")
#    - SMTP_PASSWORD=your_sendgrid_api_key
#    - Get API key: https://app.sendgrid.com/settings/api_keys
#
# 3. AWS SES (Korea region support: $0.10 per 1,000 emails)
#    - SMTP_HOST=email-smtp.ap-northeast-2.amazonaws.com (Seoul region)
#    - SMTP_PORT=587
#    - SMTP_SECURE=false
#    - SMTP_USER=your_aws_smtp_username
#    - SMTP_PASSWORD=your_aws_smtp_password
#    - Setup guide: https://docs.aws.amazon.com/ses/latest/dg/smtp-credentials.html
#
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your_gmail_app_password_here
SMTP_FROM=Connect <noreply@your-domain.com>
SMTP_FROM_NAME=Connect Platform

# ============================================
# Feature Flags
# ============================================
ENABLE_ANALYTICS=true
ENABLE_ERROR_TRACKING=true
MAINTENANCE_MODE=false

# ============================================
# Security Notes & PIPA Compliance
# ============================================
# 1. NEVER commit this file with real credentials
# 2. Use strong, unique passwords for all services
# 3. Rotate ENCRYPTION_KEY every 90 days (PIPA requirement for sensitive data)
# 4. Store backup of credentials securely (password manager)
# 5. Limit access to production environment variables
# 6. Audit logs retention: 90 days minimum (PIPA compliance)
# 7. Database backups retention: 90 days (see docs/current/Deployment_Architecture_v3.md)
# 8. Monitor decryption access logs in audit_logs table
#
# PIPA Compliance Checklist:
# ✓ Business registration numbers encrypted at rest (ENCRYPTION_KEY)
# ✓ Decryption access logged to audit_logs table
# ✓ Personal data retention policy: 90 days
# ✓ User consent tracking in database
# ✓ Data export API for user rights
#
# Key Generation Commands:
# - ENCRYPTION_KEY: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# - JWT_SECRET: openssl rand -base64 32
# - NEXTAUTH_SECRET: openssl rand -base64 32
# - DB_PASSWORD: openssl rand -base64 32
# - GRAFANA_PASSWORD: openssl rand -base64 16